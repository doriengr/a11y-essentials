# Load environment variables from .env file
if [ -f ".env" ]; then
    export $(cat .env | grep -v '^#' | xargs)
fi

# Skip checks if tooling service isn't running
if [ -z "$(docker-compose ps -q tooling)" ]; then
    echo "Tooling service not running, skipping checks"
    exit 0
fi

if [ "$PRECOMMIT_FIX" = "true" ]; then
    docker-compose exec -u dorien tooling npm run fix:all
    else docker-compose exec -u dorien tooling npm run check:all
fi
